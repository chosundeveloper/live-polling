<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live Polling - ì‹¤ì‹œê°„ ë‹µë³€ UI</title>
    <style>
        @font-face {
            font-family: 'ë‚˜ëˆ”ì†ê¸€ì”¨';
            src: url('./fonts/ë‚˜ëˆ”ì†ê¸€ì”¨ ê·œë¦¬ì˜ ì¼ê¸°.ttf') format('truetype');
            font-style: normal;
            font-display: swap;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }



        body {
            font-family: 'ë‚˜ëˆ”ì†ê¸€ì”¨', cursive, -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        body,
        body * {
            font-size: 25px !important;
            /* Force consistent typography size */
        }

        .poll-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        h1 {
            text-align: center;
            color: #667eea;
            margin-bottom: 10px;
            font-size: 2.5em;
        }

        .stats {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 1.1em;
        }

        .controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-bottom: 30px;
        }

        button {
            padding: 12px 24px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        button:active {
            transform: translateY(0);
        }

        button.active {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
        }

        #poll-results {
            list-style: none;
            display: flex;
            flex-direction: column;
            gap: 15px;
            max-height: 70vh;
            overflow-y: auto;
            padding: 10px;
        }

        #poll-results::-webkit-scrollbar {
            width: 8px;
        }

        #poll-results::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        #poll-results::-webkit-scrollbar-thumb {
            background: #667eea;
            border-radius: 10px;
        }

        .poll-result {
            padding: 20px;
            background: white;
            border-left: 4px solid #667eea;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            animation: slideIn 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .poll-result:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 16px rgba(102, 126, 234, 0.2);
        }

        .poll-result .answer-text {
            font-size: 1.1em;
            color: #333;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .poll-result .answer-text .char {
            display: inline-block;
            transform-origin: 50% 100%;
        }

        .poll-result .votes {
            color: #667eea;
            font-size: 0.9em;
            font-weight: 600;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-20px) scale(0.95);
            }

            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .empty-state {
            text-align: center;
            padding: 60px;
            color: #999;
            font-size: 1.2em;
        }
    </style>
</head>

<body>
    <div class="poll-container">
        <h1>ğŸ“Š Live Polling - ì‹¤ì‹œê°„ ë‹µë³€</h1>
        <div class="stats">
            <span id="answer-count">ë‹µë³€ ìˆ˜: 0</span> |
            <span id="status">ëŒ€ê¸° ì¤‘...</span>
        </div>
        <div class="controls">
            <button id="toggle-mock-mode">Mock ëª¨ë“œ ì‹œì‘</button>
            <button id="clear-results">ì´ˆê¸°í™”</button>
            <button id="speed-control">ì†ë„: ë³´í†µ</button>
        </div>
        <ul id="poll-results">
            <li class="empty-state">Mock ëª¨ë“œë¥¼ ì‹œì‘í•˜ë©´ ë‹µë³€ì´ ì‹¤ì‹œê°„ìœ¼ë¡œ ë‚˜íƒ€ë‚©ë‹ˆë‹¤</li>
        </ul>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/motion@11.11.13/dist/motion.min.js"></script>
    <script>
        // Mock data - 300ê°œ ìƒ˜í”Œ ë‹µë³€
        const mockAnswers = [
            "ì •ë§ ìœ ìµí•œ ì‹œê°„ì´ì—ˆìŠµë‹ˆë‹¤",
            "ìƒˆë¡œìš´ ê´€ì ì„ ë°°ì› ì–´ìš”",
            "ì‹¤ìš©ì ì¸ ë‚´ìš©ì´ ë§ì•„ì„œ ì¢‹ì•˜ìŠµë‹ˆë‹¤",
            "ê°•ì‚¬ë‹˜ì˜ ì—´ì •ì´ ëŠê»´ì¡Œì–´ìš”",
            "ë” ë§ì€ ì‹œê°„ì´ ìˆì—ˆìœ¼ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤",
            "ì‹¤ìŠµì´ ë„ì›€ì´ ë˜ì—ˆìŠµë‹ˆë‹¤",
            "ì§ˆë¬¸ì— ì¹œì ˆí•˜ê²Œ ë‹µë³€í•´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤",
            "ë‚´ìš©ì´ ì²´ê³„ì ì´ì—ˆì–´ìš”",
            "ì‹¤ë¬´ì— ë°”ë¡œ ì ìš©í•  ìˆ˜ ìˆì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤",
            "ë‹¤ìŒ ì„¸ì…˜ë„ ê¸°ëŒ€ë©ë‹ˆë‹¤"
        ];

        // 300ê°œë¡œ í™•ì¥
        const mockData = Array(300).fill(0).map((_, index) => ({
            answer: mockAnswers[index % mockAnswers.length] + ` (${index + 1})`,
            timestamp: new Date().toISOString(),
        }));

        let mockMode = false;
        let currentAnswerIndex = 0;
        let intervalId = null;
        let speed = 500; // ms
        const speeds = { 'ë¹ ë¦„': 200, 'ë³´í†µ': 500, 'ëŠë¦¼': 1000 };
        let currentSpeed = 'ë³´í†µ';

        const pollResultsList = document.getElementById('poll-results');
        const toggleMockModeButton = document.getElementById('toggle-mock-mode');
        const clearButton = document.getElementById('clear-results');
        const speedButton = document.getElementById('speed-control');
        const answerCountSpan = document.getElementById('answer-count');
        const statusSpan = document.getElementById('status');

        function updateStats() {
            const count = pollResultsList.querySelectorAll('.poll-result').length;
            answerCountSpan.textContent = `ë‹µë³€ ìˆ˜: ${count}`;
        }

        function renderPollResult(answer) {
            // ë¹ˆ ìƒíƒœ ë©”ì‹œì§€ ì œê±°
            const emptyState = pollResultsList.querySelector('.empty-state');
            if (emptyState) {
                emptyState.remove();
            }

            const pollResult = document.createElement('li');
            pollResult.classList.add('poll-result');
            pollResult.innerHTML = `
                <div class="answer-text">${answer.answer}</div>
                <div class="votes">ë°©ê¸ˆ ì „</div>
            `;

            // ë§¨ ì•ì— ì¶”ê°€ (ìµœì‹  ë‹µë³€ì´ ìœ„ë¡œ)
            pollResultsList.insertBefore(pollResult, pollResultsList.firstChild);

            animatePollResult(pollResult);

            updateStats();

            // ìµœëŒ€ 300ê°œë§Œ ìœ ì§€
            const results = pollResultsList.querySelectorAll('.poll-result');
            if (results.length > 300) {
                results[results.length - 1].remove();
            }
        }

        function animatePollResult(pollResult) {
            if (!window.motion) return;

            const textEl = pollResult.querySelector('.answer-text');
            if (!textEl) return;

            const text = textEl.textContent;
            textEl.textContent = '';
            const fragment = document.createDocumentFragment();
            for (const char of text) {
                const span = document.createElement('span');
                span.className = 'char';
                span.textContent = char === ' ' ? '\u00A0' : char;
                fragment.appendChild(span);
            }
            textEl.appendChild(fragment);

            const charSpans = textEl.querySelectorAll('.char');
            const { animate, stagger, spring } = window.motion;

            const cardSpring = spring({ stiffness: 95, damping: 26, mass: 1.1 });
            const charSpring = spring({ stiffness: 80, damping: 24, mass: 1.0 });

            animate(pollResult, {
                opacity: [0, 1],
                y: [-30, 0],
                scale: [0.94, 1]
            }, {
                easing: cardSpring,
                duration: 1.0
            });

            animate(charSpans, {
                opacity: [0, 1],
                y: [24, 0],
                rotateX: [-28, 0]
            }, {
                easing: charSpring,
                duration: 1.15,
                delay: stagger(0.016)
            });
        }

        function simulatePollingData() {
            if (currentAnswerIndex >= mockData.length) {
                stopMockMode();
                statusSpan.textContent = 'ì™„ë£Œ!';
                return;
            }

            const answer = mockData[currentAnswerIndex];
            renderPollResult(answer);
            currentAnswerIndex++;
            statusSpan.textContent = `ì§„í–‰ ì¤‘... (${currentAnswerIndex}/${mockData.length})`;
        }

        function startMockMode() {
            mockMode = true;
            currentAnswerIndex = 0;
            toggleMockModeButton.textContent = 'Mock ëª¨ë“œ ì¤‘ì§€';
            toggleMockModeButton.classList.add('active');
            statusSpan.textContent = 'ì‹œì‘!';
            intervalId = setInterval(simulatePollingData, speed);
        }

        function stopMockMode() {
            mockMode = false;
            toggleMockModeButton.textContent = 'Mock ëª¨ë“œ ì‹œì‘';
            toggleMockModeButton.classList.remove('active');
            if (intervalId) {
                clearInterval(intervalId);
                intervalId = null;
            }
        }

        function toggleMockMode() {
            if (mockMode) {
                stopMockMode();
            } else {
                startMockMode();
            }
        }

        function clearResults() {
            pollResultsList.innerHTML = '<li class="empty-state">Mock ëª¨ë“œë¥¼ ì‹œì‘í•˜ë©´ ë‹µë³€ì´ ì‹¤ì‹œê°„ìœ¼ë¡œ ë‚˜íƒ€ë‚©ë‹ˆë‹¤</li>';
            currentAnswerIndex = 0;
            updateStats();
            statusSpan.textContent = 'ì´ˆê¸°í™”ë¨';
        }

        function cycleSpeed() {
            const speedKeys = Object.keys(speeds);
            const currentIndex = speedKeys.indexOf(currentSpeed);
            const nextIndex = (currentIndex + 1) % speedKeys.length;
            currentSpeed = speedKeys[nextIndex];
            speed = speeds[currentSpeed];
            speedButton.textContent = `ì†ë„: ${currentSpeed}`;

            // ì‹¤í–‰ ì¤‘ì´ë©´ ì¬ì‹œì‘
            if (mockMode) {
                clearInterval(intervalId);
                intervalId = setInterval(simulatePollingData, speed);
            }
        }

        // Event listeners
        toggleMockModeButton.addEventListener('click', toggleMockMode);
        clearButton.addEventListener('click', clearResults);
        speedButton.addEventListener('click', cycleSpeed);

        // ì´ˆê¸° ìƒíƒœ
        updateStats();
    </script>
</body>

</html>